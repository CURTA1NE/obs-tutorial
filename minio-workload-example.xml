<?xml version="1.0" encoding="UTF-8" ?>

<workload name="minio-sample" description="sample benchmark for minio">

  <storage type="s3" config="accesskey=hust;secretkey=hust2018;endpoint=http://127.0.0.1:9000/" />

  <workflow>

    <workstage name="init">
      <work type="init" workers="1" config="cprefix=s3miniotest;containers=r(1,8)" />
    </workstage>

  	<workstage name="prepare">
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(1,1);objects=r(1,8);sizes=c(8)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(2,2);objects=r(1,8);sizes=c(16)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(3,3);objects=r(1,8);sizes=c(32)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(4,4);objects=r(1,8);sizes=c(64)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(5,5);objects=r(1,8);sizes=c(128)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(6,6);objects=r(1,8);sizes=c(256)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(7,7);objects=r(1,8);sizes=c(512)KB" />
      <work type="prepare" workers="8" config="cprefix=s3miniotest;containers=r(8,8);objects=r(1,8);sizes=c(1)MB" />
    </workstage>

    <workstage name="8kb">
      <work name="8kb-read" workers="8" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(1);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="16kb">
      <work name="16kb-read" workers="8" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(2);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="32kb">
      <work name="32kb-read" workers="4" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(3);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="64kb">
      <work name="64kb-read" workers="4" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(4);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="128kb">
      <work name="128kb-read" workers="1" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(5);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="256kb">
      <work name="256kb-read" workers="1" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(6);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="512kb">
      <work name="512kb-read" workers="1" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(7);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="1mb">
      <work name="1mb-read" workers="1" runtime="30">
        <operation type="read" ratio="100" config="cprefix=s3miniotest;containers=c(8);objects=u(1,8)" />
      </work>
    </workstage>

    <workstage name="cleanup">
      <work type="cleanup" workers="1" config="cprefix=s3miniotest;containers=r(1,8);objects=r(1,8)" />
    </workstage>

    <workstage name="dispose">
      <work type="dispose" workers="1" config="cprefix=s3miniotest;containers=r(1,8)" />
    </workstage>

  </workflow>

</workload>